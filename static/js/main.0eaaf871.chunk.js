(this["webpackJsonpski-fe"]=this["webpackJsonpski-fe"]||[]).push([[0],{225:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var a,r,c,o=n(1),s=n.n(o),i=n(19),l=n.n(i),u=(n(225),n(27)),h=n(123),d=n(124),f=d.a.div(a||(a=Object(h.a)(["\n    display: flex;\n    flex-direction: row;\n    padding-top: 20px;\n    flex-wrap: wrap;\n    justify-content: space-between;\n"]))),b=d.a.div(r||(r=Object(h.a)(["\n    display: flex;\n    padding: 40px;\n    flex-direction: column;\n"]))),j=(d.a.div(c||(c=Object(h.a)(["\n    opacity: 0.4;\n    margin: 30px;\n    background-color: white;\n"]))),n(373)),p=n(392),x=n(393),O=n(386),y=n(6),m=function(e){var t=e.handleChange,n=e.format;return Object(y.jsx)(j.a,{component:"fieldset",style:{alignItems:"center",paddingTop:"20px"},children:Object(y.jsx)(p.a,{value:n,onChange:t,children:Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(y.jsx)(x.a,{value:"years",control:Object(y.jsx)(O.a,{color:"black"}),label:"Compare years",style:{paddingRight:"20px"}}),Object(y.jsx)(x.a,{value:"resorts",control:Object(y.jsx)(O.a,{color:"black"}),label:"Compare resorts"})]})})})},v=n(144),g=n.n(v),w=n(198),S={},k={getSnowDepth:function(){var e=Object(w.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.getSnowDepth){e.next=4;break}return e.abrupt("return",S.getSnowDepth);case 4:return e.next=6,fetch("".concat("https://ski-be-hgfltltt5a-de.a.run.app","/api/snowDepth"));case 6:return t=e.sent,e.next=9,t.json();case 9:return n=e.sent,S.getSnowDepth=n,e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},D=function(){return Object(y.jsx)("div",{style:{color:"red"},children:Object(y.jsx)("h3",{children:"Oops, something went wrong. Please try refreshing the page or come back later. Sorry about that"})})},C=n(378),M=function(){return Object(y.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[Object(y.jsx)("h3",{children:"Loading..."}),Object(y.jsx)(C.a,{style:{margin:"0 auto"}})]})},J=n(121),Y=n(40),F=n(65),A=n(199),H=n(200),N=n(213),W=n(212),E=n(384),I=n(391),P=n(399),z=n(397),T=n(380),K=n(387),L=[{firstDay:1,south:"Jan",north:"July",both:"Jan/\nJuly"},{firstDay:32,south:"Feb",north:"Aug",both:"Feb/\nAug"},{firstDay:60,south:"Mar",north:"Sept",both:"Mar/\nSept"},{firstDay:91,south:"Apr",north:"Oct",both:"Apr/\nOct"},{firstDay:121,south:"May",north:"Nov",both:"May/\nNov"},{firstDay:152,south:"June",north:"Dec",both:"June/\nDec"},{firstDay:182,south:"July",north:"Jan",both:"July/\nJan"},{firstDay:213,south:"Aug",north:"Feb",both:"Aug/\nFeb"},{firstDay:244,south:"Sept",north:"Mar",both:"Sept/\nMar"},{firstDay:274,south:"Oct",north:"Apr",both:"Oct/\nApr"},{firstDay:305,south:"Nov",north:"May",both:"Nov/\nMay"},{firstDay:335,south:"Dec",north:"June",both:"Dec/\nJune"},{firstDay:366,south:"",north:"",both:""}],B=function(e){Object(N.a)(n,e);var t=Object(W.a)(n);function n(e){var a;return Object(A.a)(this,n),(a=t.call(this,e)).state={hiddenSeries:new Set},a}return Object(H.a)(n,[{key:"buildEvents",value:function(){var e=this;return this.props.series.map((function(t,n){return{childName:["legend"],target:["data","labels"],eventKey:String(n),eventHandlers:{onClick:function(){return[{childName:["area-"+n],target:"data",eventKey:"all",mutation:function(){return e.state.hiddenSeries.delete(n)||e.state.hiddenSeries.add(n),e.setState({hiddenSeries:new Set(e.state.hiddenSeries)}),null}}]},onMouseOver:function(){return[{childName:["area-"+n],target:"data",eventKey:"all",mutation:function(e){return{style:Object(Y.a)(Object(Y.a)({},e.style),{},{strokeWidth:4,fillOpacity:.5})}}}]},onMouseOut:function(){return[{childName:["area-"+n],target:"data",eventKey:"all",mutation:function(){return null}}]}}}}))}},{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{children:Object(y.jsxs)(E.a,{height:200,events:this.buildEvents(),containerComponent:Object(y.jsx)(I.a,{labels:function(e){var t=e.datum.y;return"".concat(t,"cm")},radius:5,labelComponent:Object(y.jsx)(P.a,{centerOffset:{x:5},style:{fontSize:"6px"}})}),children:[Object(y.jsx)(z.a,{style:{grid:{stroke:"#818e99",strokeWidth:.5},tickLabels:{fontSize:8}},tickValues:L.map((function(e){return e.firstDay})),tickFormat:function(t){return L.find((function(e){return e.firstDay===t}))[e.props.monthDisplay]}}),Object(y.jsx)(z.a,{style:{grid:{stroke:"#818e99",strokeWidth:.5},tickLabels:{fontSize:8}},dependentAxis:!0,tickFormat:function(e){return"".concat(e,"cm")}}),this.props.series.map((function(t,n){var a;if(!e.state.hiddenSeries.has(n))return Object(y.jsx)(T.a,{name:"area-"+n,data:(a=t,a.datapoints.map((function(e){return{name:a.name,x:e.x,y:e.y}}))),style:{data:{fill:t.color,fillOpacity:.2,stroke:t.color,strokeWidth:2}}},"area-"+n)})),Object(y.jsx)(K.a,{orientation:"horizontal",itemsPerRow:6,name:"legend",data:this.props.series.map((function(t,n){var a,r=(a=t).color?{name:a.name,symbol:{fill:a.color}}:{name:a.name};return e.state.hiddenSeries.has(n)?Object(Y.a)(Object(Y.a)({},r),{},{symbol:{fill:"#999"}}):r})),height:10,style:{labels:{fontSize:8,cursor:"pointer"}}})]})})}}]),n}(o.Component),G=n(379),R=n(377),V=n(388),$=["#556b2f","#2f4f4f","#dcdcdc","#d2691e","#4682b4","#3cb371","#808000","#708090","#006400","#191970","#7f0000","#ffb6c1","#ff69b4","#7fffd4","#ff1493","#87ceeb","#90ee90","#dda0dd","#fa8072","#f0e68c","#db7093","#1e90ff","#ff00ff","#da70d6","#ff6347","#adff2f","#a020f0","#0000ff","#9370db","#f4a460","#00bfff","#00ffff","#dc143c","#00ff7f","#00ff00","#deb887","#0000cd","#ffff00","#ffd700","#ff8c00","#ff4500","#9932cc","#8b008b","#8fbc8f","#daa520","#32cd32","#00008b","#20b2aa","#9acd32"];function q(){return"#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}var Q=n(150),U=n.n(Q);function X(e,t){var n=U()(e,"YYYY-MM-DD");t||n.subtract(6,"months");var a=n.year(),r=U()(a+"-01-01","YYYY-MM-DD");return n.diff(r,"days")}var Z=function(e){var t,n=e.data,a=e.isSouthernHemisphere,r=(t={},Object(F.a)(t,n[n.length-1].year,!0),Object(F.a)(t,n[n.length-2].year,!0),t),c=s.a.useState(r),o=Object(u.a)(c,2),i=o[0],l=o[1],h=function(e){var t=e.target,n=t.name,a=t.checked,r=Object(Y.a)({},i);r[n]=a,l(r)},d=n.map((function(e,t){var n=e.year,r=e.yearData;return{name:n,color:$[t]||q(),datapoints:r.map((function(e){var t=e.date,n=e.snow;return{x:X(t,a),y:n}}))}}));return Object(y.jsxs)(f,{children:[Object(y.jsx)("div",{style:{flexGrow:1},children:Object(y.jsx)(B,{series:d.filter((function(e){var t=e.name;return i[t]})),monthDisplay:a?"south":"north"})}),d&&Object(y.jsxs)("div",{style:{minWidth:"300px"},children:[Object(y.jsx)(G.a,{children:"Years"}),Object(y.jsx)(R.a,{label:"Years",style:{display:"flex",flexFlow:"column wrap",maxHeight:"680px",overflow:"auto",alignContent:"flex-start",width:"300px"},children:Object(J.a)(d).reverse().map((function(e){var t=e.name;return Object(y.jsx)(_,{year:t,selectedYears:i,handleCheckboxChange:h},t)}))})]})]})},_=function(e){var t=e.selectedYears,n=e.handleCheckboxChange,a=e.year;return Object(y.jsx)(x.a,{control:Object(y.jsx)(V.a,{checked:t[a],onChange:n,name:a,style:{color:"black"}}),label:a})},ee=n(381),te=n(394),ne=function(){var e=s.a.useState(void 0),t=Object(u.a)(e,2),n=t[0],a=t[1],r=s.a.useState(!1),c=Object(u.a)(r,2),i=c[0],l=c[1],h=s.a.useState(0),d=Object(u.a)(h,2),f=d[0],b=d[1];Object(o.useEffect)((function(){k.getSnowDepth().then(a,(function(){return l(!0)}))}),[]);var j=n&&n[f]||{},p=j.data,x=j.isSouthernHemisphere;return Object(y.jsxs)(y.Fragment,{children:[i&&Object(y.jsx)(D,{}),n?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h2",{children:"Snow Depth"}),Object(y.jsx)(ae,{placeIndex:f,setPlaceIndex:b,data:n}),Object(y.jsx)(Z,{data:p,isSouthernHemisphere:x})]}):Object(y.jsx)(M,{})]})},ae=function(e){var t=e.placeIndex,n=e.setPlaceIndex,a=e.data;return Object(y.jsx)(j.a,{style:{width:"300px",paddingTop:"15px 0px 20px"},children:Object(y.jsx)(ee.a,{value:t,onChange:function(e){return n(e.target.value)},children:a.map((function(e,t){var n=e.place;return Object(y.jsx)(te.a,{value:t,children:n},t)}))})})},re=function(e){var t=e.data,n=t.reduce((function(e,t){var n=t.place;return Object(Y.a)(Object(F.a)({},n,!0),e)}),{}),a=s.a.useState(n),r=Object(u.a)(a,2),c=r[0],o=r[1],i=function(e){var t=e.target,n=t.name,a=t.checked,r=Object(Y.a)({},c);r[n]=a,o(r)},l=t.map((function(e,t){var n=e.place,a=e.isSouthernHemisphere,r=e.data.yearData;return{name:n,color:$[t]||q(),datapoints:r.map((function(e){var t=e.date,n=e.snow;return{x:X(t,a),y:n}}))}}));return Object(y.jsxs)(f,{children:[Object(y.jsx)("div",{style:{flexGrow:1},children:Object(y.jsx)(B,{series:l.filter((function(e){var t=e.name;return c[t]})),monthDisplay:"both"})}),l&&Object(y.jsxs)("div",{style:{minWidth:"300px"},children:[Object(y.jsx)(G.a,{children:"Places"}),Object(y.jsx)(R.a,{label:"Places",style:{display:"flex",flexFlow:"column wrap",maxHeight:"680px",overflow:"auto",alignContent:"flex-start",width:"300px"},children:Object(J.a)(l).reverse().map((function(e){var t=e.name;return Object(y.jsx)(ce,{value:t,selected:c,handleCheckboxChange:i},t)}))})]})]})},ce=function(e){var t=e.selected,n=e.handleCheckboxChange,a=e.value;return Object(y.jsx)(x.a,{control:Object(y.jsx)(V.a,{checked:t[a],onChange:n,name:a,style:{color:"black"}}),label:a})},oe=function(){var e=s.a.useState(void 0),t=Object(u.a)(e,2),n=t[0],a=t[1],r=s.a.useState(!1),c=Object(u.a)(r,2),i=c[0],l=c[1],h=s.a.useState("2018"),d=Object(u.a)(h,2),f=d[0],b=d[1];Object(o.useEffect)((function(){k.getSnowDepth().then(a,(function(){return l(!0)}))}),[]);var j=n&&n.map((function(e){var t=e.data,n=e.place,a=e.isSouthernHemisphere;return{data:t.find((function(e){return e.year===f})),place:n,isSouthernHemisphere:a}}));return Object(y.jsxs)(y.Fragment,{children:[i&&Object(y.jsx)(D,{}),j?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h2",{children:"Snow Depth"}),Object(y.jsx)(se,{year:f,setYear:b,data:n}),Object(y.jsx)(re,{data:j})]}):Object(y.jsx)(M,{})]})},se=function(e){var t=e.year,n=e.setYear,a=e.data,r=ie(a);return Object(y.jsx)(j.a,{style:{width:"300px",paddingTop:"15px 0px 20px"},children:Object(y.jsx)(ee.a,{value:t,onChange:function(e){return n(e.target.value)},children:r.map((function(e){return Object(y.jsx)(te.a,{value:e,children:e},e)}))})})},ie=function(e){var t={},n={};return e.forEach((function(e){return e.data.forEach((function(e){var a=e.year;n[a]||(t[a]?n[a]=!0:t[a]=!0)}))})),Object.keys(n)};n(338);var le=function(){var e=Object(o.useState)("resorts"),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(b,{children:[Object(y.jsx)("h1",{style:{margin:"0 auto"},children:"The Snow Tracker"}),Object(y.jsx)(m,{format:n,handleChange:function(e){a(e.target.value)}}),"years"===n?Object(y.jsx)(ne,{}):Object(y.jsx)(oe,{})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(le,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[339,1,2]]]);
//# sourceMappingURL=main.0eaaf871.chunk.js.map