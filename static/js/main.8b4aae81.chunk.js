(this["webpackJsonpski-fe"]=this["webpackJsonpski-fe"]||[]).push([[0],{225:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var a,r,c,o,s,i,l=n(1),u=n.n(l),d=n(19),h=n.n(d),f=(n(225),n(27)),b=n(67),j=n(68),p=j.a.div(a||(a=Object(b.a)(["\n    display: flex;\n    flex-direction: row;\n    padding-top: 20px;\n    flex-wrap: wrap;\n    justify-content: space-between;\n"]))),x=j.a.div(r||(r=Object(b.a)(["\n    display: flex;\n    flex-direction: column;\n"]))),O=(j.a.div(c||(c=Object(b.a)(["\n    opacity: 0.4;\n    margin: 30px;\n    background-color: white;\n"]))),j.a.div(o||(o=Object(b.a)(["\n    background: url(",") center 0px; \n    background-size: auto 200px;\n    background-repeat: repeat no-repeat;\n    min-height: 200px;\n"])),"/snow/mountains.png")),y=j.a.img(s||(s=Object(b.a)(["\n    height: 100px;\n    margin: auto;\n    display: block;\n    padding-top: 20px;\n"]))),m=j.a.div(i||(i=Object(b.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 0 10%;\n"]))),v=n(373),g=n(392),w=n(393),S=n(386),k=n(6),D=function(e){var t=e.handleChange,n=e.format;return Object(k.jsx)(v.a,{component:"fieldset",style:{alignItems:"center",paddingTop:"20px"},children:Object(k.jsx)(g.a,{value:n,onChange:t,children:Object(k.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(k.jsx)(w.a,{value:"years",control:Object(k.jsx)(S.a,{color:"primary"}),label:"Compare years",style:{paddingRight:"20px"}}),Object(k.jsx)(w.a,{value:"resorts",control:Object(k.jsx)(S.a,{color:"primary"}),label:"Compare resorts"})]})})})},C=n(144),M=n.n(C),J=n(198),Y={},F={getSnowDepth:function(){var e=Object(J.a)(M.a.mark((function e(){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y.getSnowDepth){e.next=4;break}return e.abrupt("return",Y.getSnowDepth);case 4:return e.next=6,fetch("".concat("https://ski-be-hgfltltt5a-de.a.run.app","/api/snowDepth"));case 6:return t=e.sent,e.next=9,t.json();case 9:return n=e.sent,Y.getSnowDepth=n,e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},A=function(){return Object(k.jsx)("div",{style:{color:"red"},children:Object(k.jsx)("h3",{children:"Oops, something went wrong. Please try refreshing the page or come back later. Sorry about that"})})},H=n(378),E=function(){return Object(k.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[Object(k.jsx)("h3",{children:"Loading..."}),Object(k.jsx)(H.a,{style:{margin:"0 auto"}})]})},N=n(123),W=n(40),I=n(65),z=n(199),P=n(200),K=n(213),L=n(212),T=n(384),B=n(391),G=n(399),R=n(397),V=n(380),$=n(387),q=[{firstDay:1,south:"Jan",north:"July",both:"Jan/\nJuly"},{firstDay:32,south:"Feb",north:"Aug",both:"Feb/\nAug"},{firstDay:60,south:"Mar",north:"Sept",both:"Mar/\nSept"},{firstDay:91,south:"Apr",north:"Oct",both:"Apr/\nOct"},{firstDay:121,south:"May",north:"Nov",both:"May/\nNov"},{firstDay:152,south:"June",north:"Dec",both:"June/\nDec"},{firstDay:182,south:"July",north:"Jan",both:"July/\nJan"},{firstDay:213,south:"Aug",north:"Feb",both:"Aug/\nFeb"},{firstDay:244,south:"Sept",north:"Mar",both:"Sept/\nMar"},{firstDay:274,south:"Oct",north:"Apr",both:"Oct/\nApr"},{firstDay:305,south:"Nov",north:"May",both:"Nov/\nMay"},{firstDay:335,south:"Dec",north:"June",both:"Dec/\nJune"},{firstDay:366,south:"",north:"",both:""}],Q=function(e){Object(K.a)(n,e);var t=Object(L.a)(n);function n(e){var a;return Object(z.a)(this,n),(a=t.call(this,e)).state={hiddenSeries:new Set},a}return Object(P.a)(n,[{key:"buildEvents",value:function(){var e=this;return this.props.series.map((function(t,n){return{childName:["legend"],target:["data","labels"],eventKey:String(n),eventHandlers:{onClick:function(){return[{childName:["area-"+n],target:"data",eventKey:"all",mutation:function(){return e.state.hiddenSeries.delete(n)||e.state.hiddenSeries.add(n),e.setState({hiddenSeries:new Set(e.state.hiddenSeries)}),null}}]},onMouseOver:function(){return[{childName:["area-"+n],target:"data",eventKey:"all",mutation:function(e){return{style:Object(W.a)(Object(W.a)({},e.style),{},{strokeWidth:4,fillOpacity:.5})}}}]},onMouseOut:function(){return[{childName:["area-"+n],target:"data",eventKey:"all",mutation:function(){return null}}]}}}}))}},{key:"render",value:function(){var e=this;return Object(k.jsx)("div",{children:Object(k.jsxs)(T.a,{height:200,events:this.buildEvents(),containerComponent:Object(k.jsx)(B.a,{labels:function(e){var t=e.datum.y;return"".concat(t,"cm")},radius:5,labelComponent:Object(k.jsx)(G.a,{centerOffset:{x:5},style:{fontSize:"6px"}})}),children:[Object(k.jsx)(R.a,{style:{grid:{stroke:"#818e99",strokeWidth:.5},tickLabels:{fontSize:8}},tickValues:q.map((function(e){return e.firstDay})),tickFormat:function(t){return q.find((function(e){return e.firstDay===t}))[e.props.monthDisplay]}}),Object(k.jsx)(R.a,{style:{grid:{stroke:"#818e99",strokeWidth:.5},tickLabels:{fontSize:8}},dependentAxis:!0,tickFormat:function(e){return"".concat(e,"cm")}}),this.props.series.map((function(t,n){var a;if(!e.state.hiddenSeries.has(n))return Object(k.jsx)(V.a,{name:"area-"+n,data:(a=t,a.datapoints.map((function(e){return{name:a.name,x:e.x,y:e.y}}))),style:{data:{fill:t.color,fillOpacity:.2,stroke:t.color,strokeWidth:2}}},"area-"+n)})),Object(k.jsx)($.a,{orientation:"horizontal",itemsPerRow:6,name:"legend",data:this.props.series.map((function(t,n){var a,r=(a=t).color?{name:a.name,symbol:{fill:a.color}}:{name:a.name};return e.state.hiddenSeries.has(n)?Object(W.a)(Object(W.a)({},r),{},{symbol:{fill:"#999"}}):r})),height:10,style:{labels:{fontSize:8,cursor:"pointer"}}})]})})}}]),n}(l.Component),U=n(379),X=n(377),Z=n(388),_=["#556b2f","#2f4f4f","#dcdcdc","#d2691e","#4682b4","#3cb371","#808000","#708090","#006400","#191970","#7f0000","#ffb6c1","#ff69b4","#7fffd4","#ff1493","#87ceeb","#90ee90","#dda0dd","#fa8072","#f0e68c","#db7093","#1e90ff","#ff00ff","#da70d6","#ff6347","#adff2f","#8b008b","#a020f0","#0000ff","#9370db","#f4a460","#00bfff","#00ffff","#dc143c","#00ff7f","#00ff00","#deb887","#0000cd","#ffff00","#ffd700","#ff8c00","#ff4500","#9932cc","#8fbc8f","#daa520","#32cd32","#00008b","#20b2aa","#9acd32"];function ee(){return"#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}var te=n(150),ne=n.n(te);function ae(e,t){var n=ne()(e,"YYYY-MM-DD");t||n.subtract(6,"months");var a=n.year(),r=ne()(a+"-01-01","YYYY-MM-DD");return n.diff(r,"days")}var re=function(e){var t,n=e.data,a=e.isSouthernHemisphere,r=(t={},Object(I.a)(t,n[n.length-1].year,!0),Object(I.a)(t,n[n.length-2].year,!0),t),c=u.a.useState(r),o=Object(f.a)(c,2),s=o[0],i=o[1],l=function(e){var t=e.target,n=t.name,a=t.checked,r=Object(W.a)({},s);r[n]=a,i(r)},d=n.map((function(e,t){var n=e.year,r=e.yearData;return{name:n,color:_[t]||ee(),datapoints:r.map((function(e){var t=e.date,n=e.snow;return{x:ae(t,a),y:n}}))}}));return Object(k.jsxs)(p,{children:[Object(k.jsx)("div",{style:{flexGrow:1},children:Object(k.jsx)(Q,{series:d.filter((function(e){var t=e.name;return s[t]})),monthDisplay:a?"south":"north"})}),d&&Object(k.jsxs)("div",{style:{minWidth:"300px"},children:[Object(k.jsx)(U.a,{children:"Years"}),Object(k.jsx)(X.a,{label:"Years",style:{display:"flex",flexFlow:"column wrap",maxHeight:"680px",overflow:"auto",alignContent:"flex-start",width:"300px"},children:Object(N.a)(d).reverse().map((function(e){var t=e.name;return Object(k.jsx)(ce,{year:t,selectedYears:s,handleCheckboxChange:l},t)}))})]})]})},ce=function(e){var t=e.selectedYears,n=e.handleCheckboxChange,a=e.year;return Object(k.jsx)(w.a,{control:Object(k.jsx)(Z.a,{checked:t[a],onChange:n,name:a,style:{color:"black"}}),label:a})},oe=n(381),se=n(394),ie=function(){var e=u.a.useState(void 0),t=Object(f.a)(e,2),n=t[0],a=t[1],r=u.a.useState(!1),c=Object(f.a)(r,2),o=c[0],s=c[1],i=u.a.useState(void 0),d=Object(f.a)(i,2),h=d[0],b=d[1];Object(l.useEffect)((function(){F.getSnowDepth().then(a,(function(){return s(!0)}))}),[]),Object(l.useEffect)((function(){if(n){var e=n.findIndex((function(e){return"Spencers Creek"===e.place}));b(-1===e?0:e)}}),[n]);var j=n&&n[h]||{},p=j.data,x=j.isSouthernHemisphere;return Object(k.jsxs)(k.Fragment,{children:[o&&Object(k.jsx)(A,{}),n&&void 0!==h?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("h2",{children:"Snow Depth"}),Object(k.jsx)(le,{placeIndex:h,setPlaceIndex:b,data:n}),Object(k.jsx)(re,{data:p,isSouthernHemisphere:x})]}):Object(k.jsx)(E,{})]})},le=function(e){var t=e.placeIndex,n=e.setPlaceIndex,a=e.data;return Object(k.jsx)(v.a,{style:{width:"300px",paddingTop:"15px 0px 20px"},children:Object(k.jsx)(oe.a,{value:t,onChange:function(e){return n(e.target.value)},children:a.map((function(e,t){var n=e.place;return Object(k.jsx)(se.a,{value:t,children:n},t)}))})})},ue=function(e){var t=e.data,n=t.reduce((function(e,t){var n=t.place;return Object(W.a)(Object(I.a)({},n,!0),e)}),{}),a=u.a.useState(n),r=Object(f.a)(a,2),c=r[0],o=r[1],s=function(e){var t=e.target,n=t.name,a=t.checked,r=Object(W.a)({},c);r[n]=a,o(r)},i=t.map((function(e,t){var n=e.place,a=e.isSouthernHemisphere,r=e.data.yearData;return{name:n,color:_[t]||ee(),datapoints:r.map((function(e){var t=e.date,n=e.snow;return{x:ae(t,a),y:n}}))}}));return Object(k.jsxs)(p,{children:[Object(k.jsx)("div",{style:{flexGrow:1},children:Object(k.jsx)(Q,{series:i.filter((function(e){var t=e.name;return c[t]})),monthDisplay:"both"})}),i&&Object(k.jsxs)("div",{style:{minWidth:"300px"},children:[Object(k.jsx)(U.a,{children:"Places"}),Object(k.jsx)(X.a,{label:"Places",style:{display:"flex",flexFlow:"column wrap",maxHeight:"680px",overflow:"auto",alignContent:"flex-start",width:"300px"},children:Object(N.a)(i).reverse().map((function(e){var t=e.name;return Object(k.jsx)(de,{value:t,selected:c,handleCheckboxChange:s},t)}))})]})]})},de=function(e){var t=e.selected,n=e.handleCheckboxChange,a=e.value;return Object(k.jsx)(w.a,{control:Object(k.jsx)(Z.a,{checked:t[a],onChange:n,name:a,style:{color:"black"}}),label:a})},he=function(){var e=u.a.useState(void 0),t=Object(f.a)(e,2),n=t[0],a=t[1],r=u.a.useState(!1),c=Object(f.a)(r,2),o=c[0],s=c[1],i=u.a.useState("2018"),d=Object(f.a)(i,2),h=d[0],b=d[1];Object(l.useEffect)((function(){F.getSnowDepth().then(a,(function(){return s(!0)}))}),[]);var j=n&&n.map((function(e){var t=e.data,n=e.place,a=e.isSouthernHemisphere;return{data:t.find((function(e){return e.year===h})),place:n,isSouthernHemisphere:a}}));return Object(k.jsxs)(k.Fragment,{children:[o&&Object(k.jsx)(A,{}),j?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("h2",{children:"Snow Depth"}),Object(k.jsx)(fe,{year:h,setYear:b,data:n}),Object(k.jsx)(ue,{data:j})]}):Object(k.jsx)(E,{})]})},fe=function(e){var t=e.year,n=e.setYear,a=e.data,r=be(a);return Object(k.jsx)(v.a,{style:{width:"100px",paddingTop:"15px 0px 20px"},children:Object(k.jsx)(oe.a,{value:t,onChange:function(e){return n(e.target.value)},children:r.map((function(e){return Object(k.jsx)(se.a,{value:e,children:e},e)}))})})},be=function(e){var t={},n={};return e.forEach((function(e){return e.data.forEach((function(e){var a=e.year;n[a]||(t[a]?n[a]=!0:t[a]=!0)}))})),Object.keys(n)};n(338);var je=function(){var e=Object(l.useState)("years"),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(x,{children:[Object(k.jsx)(O,{children:Object(k.jsx)(y,{src:"".concat("/snow","/logo.png"),alt:"logo",style:{}})}),Object(k.jsxs)(m,{children:[Object(k.jsx)(D,{format:n,handleChange:function(e){a(e.target.value)}}),"years"===n?Object(k.jsx)(ie,{}):Object(k.jsx)(he,{})]})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.render(Object(k.jsx)(u.a.StrictMode,{children:Object(k.jsx)(je,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[339,1,2]]]);
//# sourceMappingURL=main.8b4aae81.chunk.js.map