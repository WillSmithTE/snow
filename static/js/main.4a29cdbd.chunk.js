(this["webpackJsonpski-fe"]=this["webpackJsonpski-fe"]||[]).push([[0],{225:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var a,r,c,o,s,i=n(1),l=n.n(i),u=n(19),d=n.n(u),h=(n(225),n(27)),f=n(80),b=n(81),j=b.a.div(a||(a=Object(f.a)(["\n    display: flex;\n    flex-direction: row;\n    padding-top: 20px;\n    flex-wrap: wrap;\n    justify-content: space-between;\n"]))),p=b.a.div(r||(r=Object(f.a)(["\n    display: flex;\n    flex-direction: column;\n"]))),x=(b.a.div(c||(c=Object(f.a)(["\n    opacity: 0.4;\n    margin: 30px;\n    background-color: white;\n"]))),b.a.div(o||(o=Object(f.a)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    background: url(",") center 0px; \n    background-size: auto 150px;\n    background-repeat: repeat no-repeat;\n    min-height: 150px;\n"])),"/snow/mountains.png")),O=b.a.div(s||(s=Object(f.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 0 40px;\n"]))),y=n(373),m=n(392),v=n(393),g=n(386),w=n(6),S=function(e){var t=e.handleChange,n=e.format;return Object(w.jsx)(y.a,{component:"fieldset",style:{alignItems:"center",paddingTop:"20px"},children:Object(w.jsx)(m.a,{value:n,onChange:t,children:Object(w.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(w.jsx)(v.a,{value:"years",control:Object(w.jsx)(g.a,{color:"black"}),label:"Compare years",style:{paddingRight:"20px"}}),Object(w.jsx)(v.a,{value:"resorts",control:Object(w.jsx)(g.a,{color:"black"}),label:"Compare resorts"})]})})})},k=n(144),D=n.n(k),C=n(198),M={},J={getSnowDepth:function(){var e=Object(C.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.getSnowDepth){e.next=4;break}return e.abrupt("return",M.getSnowDepth);case 4:return e.next=6,fetch("".concat("https://ski-be-hgfltltt5a-de.a.run.app","/api/snowDepth"));case 6:return t=e.sent,e.next=9,t.json();case 9:return n=e.sent,M.getSnowDepth=n,e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Y=function(){return Object(w.jsx)("div",{style:{color:"red"},children:Object(w.jsx)("h3",{children:"Oops, something went wrong. Please try refreshing the page or come back later. Sorry about that"})})},F=n(378),A=function(){return Object(w.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[Object(w.jsx)("h3",{children:"Loading..."}),Object(w.jsx)(F.a,{style:{margin:"0 auto"}})]})},H=n(123),N=n(40),W=n(65),E=n(199),z=n(200),I=n(213),P=n(212),T=n(384),K=n(391),L=n(399),B=n(397),G=n(380),R=n(387),V=[{firstDay:1,south:"Jan",north:"July",both:"Jan/\nJuly"},{firstDay:32,south:"Feb",north:"Aug",both:"Feb/\nAug"},{firstDay:60,south:"Mar",north:"Sept",both:"Mar/\nSept"},{firstDay:91,south:"Apr",north:"Oct",both:"Apr/\nOct"},{firstDay:121,south:"May",north:"Nov",both:"May/\nNov"},{firstDay:152,south:"June",north:"Dec",both:"June/\nDec"},{firstDay:182,south:"July",north:"Jan",both:"July/\nJan"},{firstDay:213,south:"Aug",north:"Feb",both:"Aug/\nFeb"},{firstDay:244,south:"Sept",north:"Mar",both:"Sept/\nMar"},{firstDay:274,south:"Oct",north:"Apr",both:"Oct/\nApr"},{firstDay:305,south:"Nov",north:"May",both:"Nov/\nMay"},{firstDay:335,south:"Dec",north:"June",both:"Dec/\nJune"},{firstDay:366,south:"",north:"",both:""}],$=function(e){Object(I.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(E.a)(this,n),(a=t.call(this,e)).state={hiddenSeries:new Set},a}return Object(z.a)(n,[{key:"buildEvents",value:function(){var e=this;return this.props.series.map((function(t,n){return{childName:["legend"],target:["data","labels"],eventKey:String(n),eventHandlers:{onClick:function(){return[{childName:["area-"+n],target:"data",eventKey:"all",mutation:function(){return e.state.hiddenSeries.delete(n)||e.state.hiddenSeries.add(n),e.setState({hiddenSeries:new Set(e.state.hiddenSeries)}),null}}]},onMouseOver:function(){return[{childName:["area-"+n],target:"data",eventKey:"all",mutation:function(e){return{style:Object(N.a)(Object(N.a)({},e.style),{},{strokeWidth:4,fillOpacity:.5})}}}]},onMouseOut:function(){return[{childName:["area-"+n],target:"data",eventKey:"all",mutation:function(){return null}}]}}}}))}},{key:"render",value:function(){var e=this;return Object(w.jsx)("div",{children:Object(w.jsxs)(T.a,{height:200,events:this.buildEvents(),containerComponent:Object(w.jsx)(K.a,{labels:function(e){var t=e.datum.y;return"".concat(t,"cm")},radius:5,labelComponent:Object(w.jsx)(L.a,{centerOffset:{x:5},style:{fontSize:"6px"}})}),children:[Object(w.jsx)(B.a,{style:{grid:{stroke:"#818e99",strokeWidth:.5},tickLabels:{fontSize:8}},tickValues:V.map((function(e){return e.firstDay})),tickFormat:function(t){return V.find((function(e){return e.firstDay===t}))[e.props.monthDisplay]}}),Object(w.jsx)(B.a,{style:{grid:{stroke:"#818e99",strokeWidth:.5},tickLabels:{fontSize:8}},dependentAxis:!0,tickFormat:function(e){return"".concat(e,"cm")}}),this.props.series.map((function(t,n){var a;if(!e.state.hiddenSeries.has(n))return Object(w.jsx)(G.a,{name:"area-"+n,data:(a=t,a.datapoints.map((function(e){return{name:a.name,x:e.x,y:e.y}}))),style:{data:{fill:t.color,fillOpacity:.2,stroke:t.color,strokeWidth:2}}},"area-"+n)})),Object(w.jsx)(R.a,{orientation:"horizontal",itemsPerRow:6,name:"legend",data:this.props.series.map((function(t,n){var a,r=(a=t).color?{name:a.name,symbol:{fill:a.color}}:{name:a.name};return e.state.hiddenSeries.has(n)?Object(N.a)(Object(N.a)({},r),{},{symbol:{fill:"#999"}}):r})),height:10,style:{labels:{fontSize:8,cursor:"pointer"}}})]})})}}]),n}(i.Component),q=n(379),Q=n(377),U=n(388),X=["#556b2f","#2f4f4f","#dcdcdc","#d2691e","#4682b4","#3cb371","#808000","#708090","#006400","#191970","#7f0000","#ffb6c1","#ff69b4","#7fffd4","#ff1493","#87ceeb","#90ee90","#dda0dd","#fa8072","#f0e68c","#db7093","#1e90ff","#ff00ff","#da70d6","#ff6347","#adff2f","#8b008b","#a020f0","#0000ff","#9370db","#f4a460","#00bfff","#00ffff","#dc143c","#00ff7f","#00ff00","#deb887","#0000cd","#ffff00","#ffd700","#ff8c00","#ff4500","#9932cc","#8fbc8f","#daa520","#32cd32","#00008b","#20b2aa","#9acd32"];function Z(){return"#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}var _=n(150),ee=n.n(_);function te(e,t){var n=ee()(e,"YYYY-MM-DD");t||n.subtract(6,"months");var a=n.year(),r=ee()(a+"-01-01","YYYY-MM-DD");return n.diff(r,"days")}var ne=function(e){var t,n=e.data,a=e.isSouthernHemisphere,r=(t={},Object(W.a)(t,n[n.length-1].year,!0),Object(W.a)(t,n[n.length-2].year,!0),t),c=l.a.useState(r),o=Object(h.a)(c,2),s=o[0],i=o[1],u=function(e){var t=e.target,n=t.name,a=t.checked,r=Object(N.a)({},s);r[n]=a,i(r)},d=n.map((function(e,t){var n=e.year,r=e.yearData;return{name:n,color:X[t]||Z(),datapoints:r.map((function(e){var t=e.date,n=e.snow;return{x:te(t,a),y:n}}))}}));return Object(w.jsxs)(j,{children:[Object(w.jsx)("div",{style:{flexGrow:1},children:Object(w.jsx)($,{series:d.filter((function(e){var t=e.name;return s[t]})),monthDisplay:a?"south":"north"})}),d&&Object(w.jsxs)("div",{style:{minWidth:"300px"},children:[Object(w.jsx)(q.a,{children:"Years"}),Object(w.jsx)(Q.a,{label:"Years",style:{display:"flex",flexFlow:"column wrap",maxHeight:"680px",overflow:"auto",alignContent:"flex-start",width:"300px"},children:Object(H.a)(d).reverse().map((function(e){var t=e.name;return Object(w.jsx)(ae,{year:t,selectedYears:s,handleCheckboxChange:u},t)}))})]})]})},ae=function(e){var t=e.selectedYears,n=e.handleCheckboxChange,a=e.year;return Object(w.jsx)(v.a,{control:Object(w.jsx)(U.a,{checked:t[a],onChange:n,name:a,style:{color:"black"}}),label:a})},re=n(381),ce=n(394),oe=function(){var e=l.a.useState(void 0),t=Object(h.a)(e,2),n=t[0],a=t[1],r=l.a.useState(!1),c=Object(h.a)(r,2),o=c[0],s=c[1],u=l.a.useState(0),d=Object(h.a)(u,2),f=d[0],b=d[1];Object(i.useEffect)((function(){J.getSnowDepth().then(a,(function(){return s(!0)}))}),[]);var j=n&&n[f]||{},p=j.data,x=j.isSouthernHemisphere;return Object(w.jsxs)(w.Fragment,{children:[o&&Object(w.jsx)(Y,{}),n?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{children:"Snow Depth"}),Object(w.jsx)(se,{placeIndex:f,setPlaceIndex:b,data:n}),Object(w.jsx)(ne,{data:p,isSouthernHemisphere:x})]}):Object(w.jsx)(A,{})]})},se=function(e){var t=e.placeIndex,n=e.setPlaceIndex,a=e.data;return Object(w.jsx)(y.a,{style:{width:"300px",paddingTop:"15px 0px 20px"},children:Object(w.jsx)(re.a,{value:t,onChange:function(e){return n(e.target.value)},children:a.map((function(e,t){var n=e.place;return Object(w.jsx)(ce.a,{value:t,children:n},t)}))})})},ie=function(e){var t=e.data,n=t.reduce((function(e,t){var n=t.place;return Object(N.a)(Object(W.a)({},n,!0),e)}),{}),a=l.a.useState(n),r=Object(h.a)(a,2),c=r[0],o=r[1],s=function(e){var t=e.target,n=t.name,a=t.checked,r=Object(N.a)({},c);r[n]=a,o(r)},i=t.map((function(e,t){var n=e.place,a=e.isSouthernHemisphere,r=e.data.yearData;return{name:n,color:X[t]||Z(),datapoints:r.map((function(e){var t=e.date,n=e.snow;return{x:te(t,a),y:n}}))}}));return Object(w.jsxs)(j,{children:[Object(w.jsx)("div",{style:{flexGrow:1},children:Object(w.jsx)($,{series:i.filter((function(e){var t=e.name;return c[t]})),monthDisplay:"both"})}),i&&Object(w.jsxs)("div",{style:{minWidth:"300px"},children:[Object(w.jsx)(q.a,{children:"Places"}),Object(w.jsx)(Q.a,{label:"Places",style:{display:"flex",flexFlow:"column wrap",maxHeight:"680px",overflow:"auto",alignContent:"flex-start",width:"300px"},children:Object(H.a)(i).reverse().map((function(e){var t=e.name;return Object(w.jsx)(le,{value:t,selected:c,handleCheckboxChange:s},t)}))})]})]})},le=function(e){var t=e.selected,n=e.handleCheckboxChange,a=e.value;return Object(w.jsx)(v.a,{control:Object(w.jsx)(U.a,{checked:t[a],onChange:n,name:a,style:{color:"black"}}),label:a})},ue=function(){var e=l.a.useState(void 0),t=Object(h.a)(e,2),n=t[0],a=t[1],r=l.a.useState(!1),c=Object(h.a)(r,2),o=c[0],s=c[1],u=l.a.useState("2018"),d=Object(h.a)(u,2),f=d[0],b=d[1];Object(i.useEffect)((function(){J.getSnowDepth().then(a,(function(){return s(!0)}))}),[]);var j=n&&n.map((function(e){var t=e.data,n=e.place,a=e.isSouthernHemisphere;return{data:t.find((function(e){return e.year===f})),place:n,isSouthernHemisphere:a}}));return Object(w.jsxs)(w.Fragment,{children:[o&&Object(w.jsx)(Y,{}),j?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{children:"Snow Depth"}),Object(w.jsx)(de,{year:f,setYear:b,data:n}),Object(w.jsx)(ie,{data:j})]}):Object(w.jsx)(A,{})]})},de=function(e){var t=e.year,n=e.setYear,a=e.data,r=he(a);return Object(w.jsx)(y.a,{style:{width:"300px",paddingTop:"15px 0px 20px"},children:Object(w.jsx)(re.a,{value:t,onChange:function(e){return n(e.target.value)},children:r.map((function(e){return Object(w.jsx)(ce.a,{value:e,children:e},e)}))})})},he=function(e){var t={},n={};return e.forEach((function(e){return e.data.forEach((function(e){var a=e.year;n[a]||(t[a]?n[a]=!0:t[a]=!0)}))})),Object.keys(n)};n(338);var fe=function(){var e=Object(i.useState)("resorts"),t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(p,{children:[Object(w.jsx)(x,{children:Object(w.jsx)("h1",{style:{margin:"40px auto 0"},children:"The Snow Tracker"})}),Object(w.jsxs)(O,{children:[Object(w.jsx)(S,{format:n,handleChange:function(e){a(e.target.value)}}),"years"===n?Object(w.jsx)(oe,{}):Object(w.jsx)(ue,{})]})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(Object(w.jsx)(l.a.StrictMode,{children:Object(w.jsx)(fe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[339,1,2]]]);
//# sourceMappingURL=main.4a29cdbd.chunk.js.map