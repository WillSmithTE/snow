(this["webpackJsonpski-fe"]=this["webpackJsonpski-fe"]||[]).push([[0],{212:function(e,t,a){e.exports=a(329)},217:function(e,t,a){},329:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(17),c=a.n(l),o=(a(217),a(25)),i=a(139),u=a(140);function s(){var e=Object(i.a)(["\n    display: flex;\n    padding: 20px;\n    flex-direction: column;\n"]);return s=function(){return e},e}function f(){var e=Object(i.a)(["\n    display: flex;\n    flex-direction: row;\n    padding: 10px;\n    flex-wrap: wrap;\n    justify-content: space-between;\n"]);return f=function(){return e},e}var d=u.a.div(f()),m=u.a.div(s()),h=a(363),p=a(382),b=a(383),v=a(376),y=function(e){var t=e.handleChange,a=e.format;return r.a.createElement(h.a,{component:"fieldset"},r.a.createElement(p.a,{value:a,onChange:t},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(b.a,{value:"years",control:r.a.createElement(v.a,null),label:"Compare years"}),r.a.createElement(b.a,{value:"resorts",control:r.a.createElement(v.a,null),label:"Compare resorts"}))))},E=a(141),g=a.n(E),x=a(191),S={},w={getSnowDepth:function(){var e=Object(x.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.getSnowDepth){e.next=4;break}return e.abrupt("return",S.getSnowDepth);case 4:return e.next=6,fetch("".concat("https://ski-be-hgfltltt5a-de.a.run.app","/api/snowDepth"));case 6:return t=e.sent,e.next=9,t.json();case 9:return a=e.sent,S.getSnowDepth=a,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},k=function(){return r.a.createElement("div",{style:{color:"red"}},r.a.createElement("h3",null,"Oops, something went wrong. Please try refreshing the page or come back later. Sorry about that"))},O=a(368),D=function(){return r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},r.a.createElement("h3",null,"Loading..."),r.a.createElement(O.a,{style:{margin:"0 auto"}}))},j=a(116),C=a(54),L=a(64),Y=a(192),M=a(193),H=a(203),F=a(204),J=a(374),W=a(381),A=a(389),N=a(387),P=a(370),z=a(377),I=[{firstDay:1,label:"Jan",altLabel:"July"},{firstDay:32,label:"Feb",altLabel:"Aug"},{firstDay:60,label:"Mar",altLabel:"Sept"},{firstDay:91,label:"Apr",altLabel:"Oct"},{firstDay:121,label:"May",altLabel:"Nov"},{firstDay:152,label:"June",altLabel:"Dec"},{firstDay:182,label:"July",altLabel:"Jan"},{firstDay:213,label:"Aug",altLabel:"Feb"},{firstDay:244,label:"Sept",altLabel:"Mar"},{firstDay:274,label:"Oct",altLabel:"Apr"},{firstDay:305,label:"Nov",altLabel:"May"},{firstDay:335,label:"Dec",altLabel:"June"},{firstDay:366,label:"",altLabel:""}],K=function(e){Object(F.a)(a,e);var t=Object(H.a)(a);function a(e){var n;return Object(Y.a)(this,a),(n=t.call(this,e)).state={hiddenSeries:new Set},n}return Object(M.a)(a,[{key:"buildEvents",value:function(){var e=this;return this.props.series.map((function(t,a){return{childName:["legend"],target:["data","labels"],eventKey:String(a),eventHandlers:{onClick:function(){return[{childName:["area-"+a],target:"data",eventKey:"all",mutation:function(){return e.state.hiddenSeries.delete(a)||e.state.hiddenSeries.add(a),e.setState({hiddenSeries:new Set(e.state.hiddenSeries)}),null}}]},onMouseOver:function(){return[{childName:["area-"+a],target:"data",eventKey:"all",mutation:function(e){return{style:Object(C.a)({},e.style,{strokeWidth:4,fillOpacity:.5})}}}]},onMouseOut:function(){return[{childName:["area-"+a],target:"data",eventKey:"all",mutation:function(){return null}}]}}}}))}},{key:"render",value:function(){var e=this;return n.createElement("div",null,n.createElement(J.a,{height:200,events:this.buildEvents(),containerComponent:n.createElement(W.a,{labels:function(e){var t=e.datum.y;return"".concat(t,"cm")},radius:5,labelComponent:n.createElement(A.a,{centerOffset:{x:5},style:{fontSize:"6px"}})})},n.createElement(N.a,{style:{grid:{stroke:"#818e99",strokeWidth:.5},tickLabels:{fontSize:8}},tickValues:I.map((function(e){return e.firstDay})),tickFormat:function(t){var a=I.find((function(e){return e.firstDay===t}));return e.props.isSouthernHemisphere?a.label:a.altLabel}}),n.createElement(N.a,{style:{grid:{stroke:"#818e99",strokeWidth:.5},tickLabels:{fontSize:8}},dependentAxis:!0,tickFormat:function(e){return"".concat(e,"cm")}}),this.props.series.map((function(t,a){var r;if(!e.state.hiddenSeries.has(a))return n.createElement(P.a,{key:"area-"+a,name:"area-"+a,data:(r=t,r.datapoints.map((function(e){return{name:r.name,x:e.x,y:e.y}}))),style:{data:{fill:t.color,fillOpacity:.2,stroke:t.color,strokeWidth:2}}})})),n.createElement(z.a,{orientation:"horizontal",itemsPerRow:6,name:"legend",data:this.props.series.map((function(t,a){var n,r=(n=t).color?{name:n.name,symbol:{fill:n.color}}:{name:n.name};return e.state.hiddenSeries.has(a)?Object(C.a)({},r,{symbol:{fill:"#999"}}):r})),height:10,style:{labels:{fontSize:8,cursor:"pointer"}}})))}}]),a}(n.Component),T=a(369),B=a(367),G=a(378),R=["#556b2f","#2f4f4f","#dcdcdc","#d2691e","#4682b4","#3cb371","#808000","#708090","#006400","#191970","#7f0000","#ffb6c1","#ff69b4","#7fffd4","#ff1493","#87ceeb","#90ee90","#dda0dd","#fa8072","#f0e68c","#db7093","#1e90ff","#ff00ff","#da70d6","#ff6347","#adff2f","#a020f0","#0000ff","#9370db","#f4a460","#00bfff","#00ffff","#dc143c","#00ff7f","#00ff00","#deb887","#0000cd","#ffff00","#ffd700","#ff8c00","#ff4500","#9932cc","#8b008b","#8fbc8f","#daa520","#32cd32","#00008b","#20b2aa","#9acd32"];function V(){return"#000000".replace(/0/g,(function(){return(~~(16*Math.random())).toString(16)}))}var $=a(147),q=a.n($);function Q(e,t){var a=q()(e,"YYYY-MM-DD");t||a.subtract(6,"months");var n=a.year(),r=q()(n+"-01-01","YYYY-MM-DD");return a.diff(r,"days")}var U=function(e){var t,a=e.data,n=e.isSouthernHemisphere,l=(t={},Object(L.a)(t,a[a.length-1].year,!0),Object(L.a)(t,a[a.length-2].year,!0),t),c=r.a.useState(l),i=Object(o.a)(c,2),u=i[0],s=i[1],f=function(e){var t=e.target,a=t.name,n=t.checked,r=Object(C.a)({},u);r[a]=n,s(r)},m=a.map((function(e,t){var a=e.year,r=e.yearData;return{name:a,color:R[t]||V(),datapoints:r.map((function(e){var t=e.date,a=e.snow;return{x:Q(t,n),y:a}}))}}));return r.a.createElement(d,null,r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(K,{series:m.filter((function(e){var t=e.name;return u[t]})),isSouthernHemisphere:n})),m&&r.a.createElement("div",{style:{minWidth:"300px"}},r.a.createElement(T.a,null,"Years"),r.a.createElement(B.a,{label:"Years",style:{display:"flex",flexFlow:"column wrap",maxHeight:"680px",overflow:"auto",alignContent:"flex-start",width:"300px"}},Object(j.a)(m).reverse().map((function(e){var t=e.name;return r.a.createElement(X,{year:t,selectedYears:u,handleCheckboxChange:f,key:t})})))))},X=function(e){var t=e.selectedYears,a=e.handleCheckboxChange,n=e.year;return r.a.createElement(b.a,{control:r.a.createElement(G.a,{checked:t[n],onChange:a,name:n,style:{color:"black"}}),label:n})},Z=a(371),_=a(384),ee=function(){var e=r.a.useState(void 0),t=Object(o.a)(e,2),a=t[0],l=t[1],c=r.a.useState(!1),i=Object(o.a)(c,2),u=i[0],s=i[1],f=r.a.useState(0),d=Object(o.a)(f,2),m=d[0],h=d[1];Object(n.useEffect)((function(){w.getSnowDepth().then(l,(function(){return s(!0)}))}),[]);var p=a&&a[m]||{},b=p.data,v=p.isSouthernHemisphere;return r.a.createElement(r.a.Fragment,null,u&&r.a.createElement(k,null),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Snow Depth"),r.a.createElement(te,{placeIndex:m,setPlaceIndex:h,data:a}),r.a.createElement(U,{data:b,isSouthernHemisphere:v})):r.a.createElement(D,null))},te=function(e){var t=e.placeIndex,a=e.setPlaceIndex,n=e.data;return r.a.createElement(h.a,{style:{width:"300px",paddingTop:"15px 0px 20px"}},r.a.createElement(Z.a,{value:t,onChange:function(e){return a(e.target.value)}},n.map((function(e,t){var a=e.place;return r.a.createElement(_.a,{value:t,key:t},a)}))))},ae=function(e){var t=e.data,a=t.reduce((function(e,t){var a=t.place;return Object(C.a)(Object(L.a)({},a,!0),e)}),{}),n=r.a.useState(a),l=Object(o.a)(n,2),c=l[0],i=l[1],u=function(e){var t=e.target,a=t.name,n=t.checked,r=Object(C.a)({},c);r[a]=n,i(r)},s=t.map((function(e,t){var a=e.place,n=e.isSouthernHemisphere,r=e.data.yearData;return{name:a,color:R[t]||V(),datapoints:r.map((function(e){var t=e.date,a=e.snow;return{x:Q(t,n),y:a}}))}}));return r.a.createElement(d,null,r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(K,{series:s.filter((function(e){var t=e.name;return c[t]}))})),s&&r.a.createElement("div",{style:{minWidth:"300px"}},r.a.createElement(T.a,null,"Places"),r.a.createElement(B.a,{label:"Places",style:{display:"flex",flexFlow:"column wrap",maxHeight:"680px",overflow:"auto",alignContent:"flex-start",width:"300px"}},Object(j.a)(s).reverse().map((function(e){var t=e.name;return r.a.createElement(ne,{value:t,selected:c,handleCheckboxChange:u,key:t})})))))},ne=function(e){var t=e.selected,a=e.handleCheckboxChange,n=e.value;return r.a.createElement(b.a,{control:r.a.createElement(G.a,{checked:t[n],onChange:a,name:n,style:{color:"black"}}),label:n})},re=function(){var e=r.a.useState(void 0),t=Object(o.a)(e,2),a=t[0],l=t[1],c=r.a.useState(!1),i=Object(o.a)(c,2),u=i[0],s=i[1],f=r.a.useState("2018"),d=Object(o.a)(f,2),m=d[0],h=d[1];Object(n.useEffect)((function(){w.getSnowDepth().then(l,(function(){return s(!0)}))}),[]);var p=a&&a.map((function(e){var t=e.data,a=e.place,n=e.isSouthernHemisphere;return{data:t.find((function(e){return e.year===m})),place:a,isSouthernHemisphere:n}}));return r.a.createElement(r.a.Fragment,null,u&&r.a.createElement(k,null),p?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Snow Depth"),r.a.createElement(le,{year:m,setYear:h,data:a}),r.a.createElement(ae,{data:p})):r.a.createElement(D,null))},le=function(e){var t=e.year,a=e.setYear,n=e.data,l=ce(n);return r.a.createElement(h.a,{style:{width:"300px",paddingTop:"15px 0px 20px"}},r.a.createElement(Z.a,{value:t,onChange:function(e){return a(e.target.value)}},l.map((function(e){return r.a.createElement(_.a,{value:e,key:e},e)}))))},ce=function(e){var t={},a={};return e.forEach((function(e){return e.data.forEach((function(e){var n=e.year;a[n]||(t[n]?a[n]=!0:t[n]=!0)}))})),Object.keys(a)};var oe=function(){var e=Object(n.useState)("resorts"),t=Object(o.a)(e,2),a=t[0],l=t[1];return r.a.createElement(m,null,r.a.createElement("h1",null,"SnowTrack"),r.a.createElement(y,{format:a,handleChange:function(e){l(e.target.value)}}),"years"===a?r.a.createElement(ee,null):r.a.createElement(re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[212,1,2]]]);
//# sourceMappingURL=main.e7731dee.chunk.js.map